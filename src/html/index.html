<!DOCTYPE html>
<html lang="th">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>
        <?= title ?>
    </title>
    <link rel="icon" href="https://scontent.fbkk22-4.fna.fbcdn.net/v/t1.0-9/120255176_3346579338756362_2357071726779952401_n.jpg?_nc_cat=111&_nc_sid=dbeb18&_nc_eui2=AeEVUb-0d4LcisMTO3aDozERMgFIZlpIi6UyAUhmWkiLpXOFSv04EFE4O9b02ZE2F9z0OztD2vxWCg_TBxbA5jSB&_nc_ohc=b5zUwSjAKY8AX_P1gN7&_nc_ht=scontent.fbkk22-4.fna&oh=1aee43c61c82b9423c691363354159db&oe=5F9BAD44"
        type="image/gif" sizes="16x16">
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css" integrity="sha384-JcKb8q3iqJ61gNV9KGb8thSsNjpSL0n8PARn9HuZOnIxN0hoP+VmmDGMN5t9UJ0Z" crossorigin="anonymous">
    <script src="https://code.jquery.com/jquery-3.5.1.slim.min.js" integrity="sha384-DfXdz2htPH0lsSSs5nCTpuj/zy4C+OGpamoFVy38MVBnE+IbbVYUew+OrCXaRkfj" crossorigin="anonymous">
    </script>
    <script src="https://cdn.jsdelivr.net/npm/popper.js@1.16.1/dist/umd/popper.min.js" integrity="sha384-9/reFTGAW83EW2RDu2S0VKaIzap3H66lZH81PoYlFhbGU+6BZp6G7niu735Sk7lN" crossorigin="anonymous">
    </script>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/js/bootstrap.min.js" integrity="sha384-B4gt1jrGC7Jh4AgTPSdUtOBvfO8shuf57BaghqFfPlYxofvL8/KUEfYiJOMMV+rV" crossorigin="anonymous">
    </script>
    <link rel="stylesheet" href="//cdn.datatables.net/1.10.22/css/jquery.dataTables.min.css">
    <script src="//cdn.datatables.net/1.10.22/js/jquery.dataTables.min.js"></script>
    <script src="https://static.line-scdn.net/liff/edge/2.1/liff.js"></script>
</head>

<body>
    <nav class="navbar navbar-expand-sm bg-white navbar-light">
        <a class="navbar-brand" href="#">
            <img src="https://www.blisstel.co.th/wp-content/uploads/2018/07/terra-e1531841401859.png" alt="Logo">
        </a>
        <h2>ทะเบียนติดตามสถานะการทำงาน</h2>
    </nav>
    <div class="container">
        <table id="example" class="display nowrap" style="width:100%">
        </table>
    </div>
</body>

</html>

<script>
    document.addEventListener("DOMContentLoaded", function() {
        var dataSet = [];

        liff.init({
            liffId: "1655031884-bjPLyNBR"
        }, () => {}, err => console.error(err.code, error.message));

        function onSuccess(array) {
            dataSet = JSON.parse(array);

            $('#example').DataTable({
                data: dataSet,
                columns: [{
                    title: "Project",
                    data: "Project"
                }, {
                    title: "ชื่อผู้ติดต่อ",
                    data: "ชื่อผู้ติดต่อ",
                    render: function(data, type, row, meta) {
                        return data === '' ?
                            '-' : data;
                    }
                }, {
                    title: "เบอร์โทร",
                    data: "เบอร์โทร",
                    render: function(data, type, row, meta) {
                        return data === '' ?
                            '-' : data;
                    }
                }]
            });
        }

        google.script.run.withSuccessHandler(onSuccess)
            .filterByValue();

    });
</script>